1. 관리자 접속 정보 테이블

- 관리자 로그인에 사용
- 하나의 아이디를 여러 관리자가 사용을 하면 로그인 정보가 유출됐을 때 확인이 어려움
-> 외부인이 접속을 했는지, 다른 관리자가 로그인을 했는지 구분이 힘듦
- 관리자마다 각기 다른 아이디를 사용하면, 해당 관리자가 퇴시할 경우 바로 해당 아이디를 사용 중지(is_active = false)
  로그인을 할 때 나의 아이디로 최근에 로그인한 시간을 보면 부정 접속을 확인할 수 있음(last_login)
- 로그인 처리를 해야 할 때는 is_active 값이 true 인것만 사용
ex, SELECT * FROM `admin_uses` WHERE `admin_id` = ? AND is_active = true;

-----

2. 월정액 회원 테이블
- 프라이머리 키를 무엇으로 사용?
회원아이디나 자동차 번호 중 선택을 하면 될 것 같은데,
한 회원이 1월에 등록하고 2월에 재등록을 할 경우에, 혹은 1월에 등록을 하고 3월에 재등록 하는 경우, 시작일과 종료일만 수정하면 발생하는 문제가 있음.
해당 회원의 이전 등록 내역을 확인할 수 없음

1) 1월에 이 회원이 무료로 주차한 내역이 문제가 없었는지 확인이 불가
2) 장기간 월 정액회원이었던 직원이 중간에 월정액을 해지하고 무료 주차를 했는지 확인이 불가
3) 장기간 사용하는 회원에게 할인 혜택을 주는 정책을 도입할 경우 이전 내역을 확인할 수 없음
4) 통계나 감사시에 월정액 회원 매출 집계가 힘듦.

-> 자동 증가하는 회원 아이디를 프라이머리 키로 사용
월 정액을 갱신하는 경우에는 새로운 레코드를 추가하는 방식으로 처리
현재 월정액 대상인지 확인은 현재일 기준으로 시작일과 종료일을 비교하여 처리
ex, now() between start_date and end_date
조건절에 자주 사용이 되니 해당 컬럼은 인덱스 처리.

-----

3. 요금관련 테이블
관리자가 요금을 수정할 수 있어야 하므로, 하드코딍 대신 DB에서 불러오도록 설계

- 요금 관련은 2개의 테이블이 필요
주차 요금을 계산할 수 있는 테이블(fee_config), 할인율을 저장하는 테이블(discount_policy)

1) fee_config
필요한 정보를 컬럼으로 저장
기본요금에 추가 요금이 발생하고 일일최대 요금을 초과하지 않는 구조는 변경 가능성이 높지 않으므로, 컬럼으로 저장.
(만일 연휴에는 다른 요금 정책을 적용한다면, 레코드 단위로 관리해야함)

- 기본 요금 (기본 시간까지의 요금)
base_fee : 기본 요금
base_time : 기본 시간 (분)

- 추가 요금
additional_fee : 추가 요금
additional_time : 추가 시간 (분)

할인 정책이 주차 요금 계산에 자주 사용되므로, 활성화 여부(is_active)와 수정일(updated_at) 컬럼 추가
또, 주차 타입으로도 사용할 수 있게 할인이 없는 일반 주차도 데이터 입력

2) discount_policy
할인 정책 테이블
할인 정책은 여러가지가 있을 수 있으므로, 할인 정책 이름과 할인율을 저장
할인 정책이 추가도리 가능성이 높으므로, 레코드 단위로 관리
할인 정책 이름 (discount_name)
할인율 (discount_rate)

할인 정책 주차 요금 계산에 자주 사용되므로, 활성화 여부(is_active)와 수정일(update_at) 컬럼 추가
또, 주차 타입으로도 사용할 수 있게 할인이 없는 일반 주차도 데이터 입력

-----

4. 주차 공간 테이블
요구 사항에는 주차공간이 20개로 되어있으나, 솔루션 형태로 소프트웨어를 개발하는 경우에는 고객사마다 주차 공간이 다를 수 있으므로,
주차 공간 테이블을 별도로 만들어 관리하는 것이 좋음

-----

5. 주차 기록
필요한 부분은 2가지 1) 주차 기록 2) 요금 기록
따로 테이블을 만드는 것도 가능
예를 들어 출차 처리 시점에 요금 기록이 추가. (출차전에는 요금을 알 수 없음)
우선은 하나의 테이블에 모두 저장하는 것으로 처리.

필요한 정보는 주차의 경우
차량번호, 연락처, 입차시간, 출차시간, 주차구역
요금의 경우
총주차 분, 총 요금, 할인 정책, 할인된 금액, 결제 여부, 결제 시간
-> 요금이 맞게 계산되고 있는지를 계속 확인하기 위해 필요.